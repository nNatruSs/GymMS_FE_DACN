<!-- <div class="card shadow-sm border-0">
  <div class="card-body">
    <h6 class="fw-semibold mb-3">January 2025</h6>

    <div class="row g-2">
      <div class="col-2 text-center" *ngFor="let day of days">
        <div class="calendar-day">
          <small>{{ day.date }}</small>

          <div
            *ngFor="let booking of day.bookings"
            class="booking-pill"
            data-bs-toggle="modal"
            data-bs-target="#bookingDetailModal"
          >
            {{ booking.name }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<!-- <div class="row g-3">
  <div class="col-md-3" *ngFor="let b of bookings">
    <div class="card shadow-sm">
      <div class="card-body">
        <strong>{{ b.name }}</strong>
        <div class="text-muted small">{{ b.date }} | {{ b.time }}</div>
      </div>
    </div>
  </div>
</div> -->


<!-- <div *ngIf="loading" class="text-center py-5">
  <div class="spinner-border text-primary"></div>
</div>

<div *ngIf="!loading" class="calendar-wrapper">

  <div class="calendar-grid">

    <div></div>
    <div
      *ngFor="let d of weekDates"
      class="calendar-header"
    >
      {{ d | date:'EEE dd' }}
    </div>

    <ng-container *ngFor="let time of timeSlots">
      <div class="time-label">{{ time }}</div>

      <div
        *ngFor="let d of weekDates"
        class="calendar-cell"
        [class.class-booking]="isClass(d, time)"
        [class.trainer-booking]="isTrainer(d, time)"
        (click)="getBooking(d,time) && selectBooking.emit(getBooking(d,time))"
      >
        <span *ngIf="getBooking(d,time)">
          {{ getBooking(d,time).title }}
        </span>
      </div>
    </ng-container>
  </div>

  <div class="calendar-legend">
    <h6 class="fw-semibold mb-2">Legend</h6>

    <div class="legend-item">
      <span class="dot class"></span>
      Class session
    </div>

    <div class="legend-item">
      <span class="dot trainer"></span>
      Trainer session
    </div>
  </div>

</div> -->

<div *ngIf="loading" class="text-center py-5">
  <div class="spinner-border text-primary"></div>
</div>

<div *ngIf="!loading" class="calendar-wrapper">

  <!-- WEEK NAV -->
  <div class="calendar-nav">
    <button class="nav-btn" (click)="prevWeek()">‹</button>
    <span class="fw-semibold">{{ monthLabel }}</span>
    <button class="nav-btn" (click)="nextWeek()">›</button>
  </div>

  <!-- GRID -->
  <div class="calendar-grid">

    <div></div>
    <div *ngFor="let d of weekDates" class="calendar-header">
      {{ d | date:'EEE dd' }}
    </div>

    <ng-container *ngFor="let time of timeSlots">
      <div class="time-label">{{ time }}</div>

      <div
        *ngFor="let d of weekDates"
        class="calendar-cell"
        [class.class-booking]="isClass(d,time)"
        [class.trainer-booking]="isTrainer(d,time)"
        (click)="getBooking(d,time) && openBooking(getBooking(d,time))"
      >
        {{ getBooking(d,time)?.title }}
      </div>
    </ng-container>
  </div>

  <!-- LEGEND -->
  <div class="calendar-legend">
    <div><span class="dot class"></span> Class</div>
    <div><span class="dot trainer"></span> Trainer</div>
  </div>

</div>

<!-- MODAL -->
<app-booking-calendar-modal
  *ngIf="selectedBooking"
  [booking]="selectedBooking"
  (close)="closeModal()"
  (cancel)="cancelBooking($event)">
</app-booking-calendar-modal>